# FUEL: Fast UAV Exploration using Incremental Frontier Structure and Hierarchical Planning FUEL：利用增量前沿结构和分层规划进行快速无人机探索
---
摘要——自主探索是无人机各种应用中的一个基本问题。然而，现有方法显示出探索速率不足，这是由于缺乏高效的全局覆盖、保守的运动计划和低决策频率所致。在本文中，我们提出了一种名为 FUEL 的分层框架，可以在复杂未知环境中支持快速无人机探索。我们通过前沿信息结构（  frontier information structure FIS）在整个探索规划所需的空间中保持关键信息，当空间被探索时，该结构可以被增量更新。在 FIS 的支持下，分层规划器通过三个步骤规划探索运动，这些步骤包括找到高效的全局覆盖路径、细化局部视点集合以及按顺序生成最小时间轨迹。我们进行了广泛的基准测试和实际测试，在这些测试中，我们的方法相比于最先进的方法完成了探索任务，效率前所未有（快3-8倍）。
我们的方法将开源，以造福社区。

关键词——航空系统：应用；航空系统：感知与自主性；运动与路径规划

---

## I. 引言 
 无人机，特别是四旋翼飞行器，在各种应用中都广受欢迎，例如检查、精密农业和搜索与救援。在这些任务中，自主探索是一个基本组成部分，其中飞行器探索和绘制未知环境以收集信息。近年来，已经提出了各种探索规划方法，并展示了一些实际世界的实验。然而，大多数方法都表现出较低/中等的探索速率，这对于许多大规模实际应用来说是不令人满意的。首先，许多现有的规划器以贪婪的方式规划探索运动，例如最大化即时信息增益或导航到最近的未知区域。贪婪策略忽视了全局最优性，因此导致总体效率低下。此外，大多数方法在以前未知的环境中生成相当保守的运动，以同时保证信息增益和安全性。低速探索然而，这种做法限制了四旋翼飞行器充分利用其动态能力来完成任务。最后但同样重要的是，许多方法存在高计算开销，无法对环境变化做出快速而频繁的响应。然而，为了实现更快的探索，当环境的新信息可用时，立即重新规划新的运动是可取的。

受以上事实的启发，本文提出了一种名为 FUEL 的分层框架，可以支持在复杂环境中进行快速无人机探索。我们引入了一个称为前沿信息结构（FIS）的结构，其中包含了探索规划所需的整个空间中的基本信息。当收集到新信息时，该结构可以高效且增量地更新，因此能够支持高频率的规划。基于 FIS，分层规划器通过三个粗到细的步骤生成探索运动。它首先找到一个全局探索路径，该路径在累积的环境信息上是最优的。然后，对路径上的局部视点进行细化，进一步提高了探索速率。最后，生成一个安全、动态可行且最短时间的轨迹。规划器不仅生成了高效的全局覆盖路径，还生成了安全而灵活的局部机动。此外，规划器在探索到未访问区域时会被触发，以便四旋翼飞行器始终能够迅速响应任何环境变化，从而实现持续快速的探索。

我们在模拟中将我们的方法与经典方法和最先进的方法进行了比较。结果显示，在所有情况下，我们的方法都能以更短的时间完成完整的探索（快3-8倍）。此外，我们在各种具有挑战性的实际环境中进行了全载荷实时探索。无论是模拟还是实际测试，都显示出我们的方法相比最先进的方法具有前所未有的性能。为了造福社区，我们将公开源代码。本文的贡献总结如下：
1) 一个增量更新的 FIS，它捕获了整个探索空间的基本信息，并支持高频率的探索规划。
2) 一种分层规划方法，它为高速探索生成了高效的全局覆盖路径和安全灵活的局部机动。
3) 大量的模拟和实际测试验证了所提出的方法。我们系统的源代码将公开。

## II. 相关工作
### A. 探索路径规划
机器人探索，利用移动机器人绘制未知环境，已经研究了多年。一些工作侧重于快速探索空间，就像本文所做的那样。与此同时，其他方法更加注重精确重建。在各种提出的方法中，基于前沿的方法是一种经典方法。这些方法首先在文献[7]中介绍，随后在文献[8]中进行了更全面的评估。为了在3D空间中检测前沿，文献[9]提出了一种基于随机微分方程的方法。在原始方法[7]中，选择最近的前沿作为下一个目标。文献[1]提出了一种不同的方案。在每个决策中，它选择FOV内使速度变化最小以保持一致高飞行速度的前沿。这种方案表现出优于经典方法[7]的效果。在文献[10]中，引入了一种基于前沿信息增益的可微测量方法，允许使用梯度信息优化路径。作为另一种主要方法的采样式探索，随机生成视点来探索空间。这些方法与下一个最佳视角（NBV）的概念密切相关，它重复计算覆盖视角以获得场景的完整模型。文献[12]首次将NBV用于3D探索，在其中使用可访问空间扩展了RRTs，并以递归地方式执行具有最高信息增益的边缘。稍后，该方法被扩展以考虑定位的不确定性[13]、不同对象的视觉重要性[14]和检查任务[15]。为了避免直接丢弃扩展树，文献[16, 17]构建了路网以重用先前的知识。文献[2]使用受RRT*启发的重连方案持续维护和完善单一树。为了实现更快的飞行，文献[5]直接对安全且动态可行的运动原语进行采样，并执行最具信息的运动。
还有一些方法结合了基于前沿和基于采样的方法的优势。文献[4, 18]规划通向前沿的全局路径，并在本地进行路径采样。文献[18]还提出了一种基于梯度的方法来优化本地路径。文献[3]在前沿周围采样视点，并找到通过它们的全局最短路径。文献[6]使用基于采样的算法生成完全覆盖前沿的检查路径。大多数现有方法都贪婪地做出决策，并未考虑四旋翼飞行器的动态特性，导致全局路径不高效和保守的机动。相比之下，我们规划的路径可以高效地覆盖整个环境，并生成动态可行的最短时间轨迹，以实现灵活的飞行。
### B. 四旋翼飞行器轨迹规划
四旋翼飞行器的轨迹规划已经广泛研究，主要可以分为硬约束和软约束两种方法。前者由最小扭矩轨迹首创，后来提出了其闭合形式解决方案。基于最小扭矩轨迹，文献[21]-[23]提取了用于安全轨迹生成的凸安全区域。为了获得更合理的时间分配，提出了快速行进、动力学搜索和混合整数方法。文献[22]还介绍了一种有效的基于Bezier曲线的方法来保证可行性。
软约束方法通常通过制定一个非线性优化来权衡几个目标。近年来，它们被应用于局部重新规划，并展示出了引人注目的性能。这些方法由[31]重新激活，并在[25]后扩展到连续时间轨迹。为了缓解局部最小值问题，文献[26]使用无碰撞路径初始化优化。文献[27]引入均匀B样条进行重新规划。更近期的，文献[28]进一步利用了B样条，并在现场测试中展示了快速飞行。文献[28]在拓扑引导路径和感知感知方面进一步改进。在本文中，我们的轨迹规划基于[28]，但将其扩展到优化B样条的所有参数。通过这种方式，可以最小化总轨迹时间，从而以更高的导航速度探索未知空间。
## III. 系统概述
所提出的框架在一个体素网格地图上运行。如图2所示，它由前沿信息结构的增量更新（第四节）和分层探索规划方法（第五节）组成。每当使用传感器测量更新地图时，都会检查是否有任何前沿聚类受到影响。如果是这样，受影响的聚类的前沿信息结构将被移除，同时提取新的前沿以及它们的前沿信息结构（第四节）。然后，触发探索规划，依次找到全局探索路径，优化局部视点，并生成到选定视点的轨迹（第五节）。如果不存在前沿，则认为探索已完成。

## IV. 增量前沿信息结构
如经典前沿导向探索所述，前沿被定义为紧邻未知体素的已知自由体素，它们被分组成簇来指导导航。传统上，提取的信息过于粗糙，无法进行精细的决策。此外，前沿是通过处理整个地图来检索的，这对于大场景和高规划频率来说是不可扩展的。在这项工作中，我们从前沿中提取更丰富的信息，以实现更精细的规划，并开发了一种增量方法来检测在局部更新的地图中的前沿。

A. 前沿信息结构
当创建新的前沿簇 $( F_i )$ 时，会计算一个前沿信息结构 $( FL_i )$。它存储属于该簇的所有单元格 $( C_i )$ 及其平均位置 $( p_{avg, i} )$。同时还计算了簇的轴对齐包围盒（AABB）$( B_i )$，以加速检测前沿变化（第四节B部分）。为了服务于探索规划（第五节），围绕簇生成候选视点 $( VP_i )$。此外，还计算了一个双向链表 $( L_{cost, i} )$，包含 $( F_i )$ 与所有其他簇之间的连接成本。FIS存储的数据列在表I中。
## 系统结构图

![Alt text](image.png)

这个框图分为两个主要部分：增量前沿信息结构（Incremental Frontier Information Structure）和分层规划（Hierarchical Planning），分别用红色虚线和绿色虚线框住。

### 增量前沿信息结构
这部分负责检测和更新前沿信息，主要步骤如下：

1. **Frontier Changed?（前沿改变？）**：
   - 检查当前前沿是否发生变化。如果发生变化，则进行下一步。

2. **Frontier Detection and Clustering（前沿检测和聚类）**：
   - 进行前沿检测并将其聚类，识别出新的前沿区域。

3. **Viewpoint Generation（视点生成）**：
   - 基于检测到的前沿，生成新的视点（观测点）。

4. **Connection Cost Update（连接成本更新）**：
   - 更新连接成本，以反映新的前沿信息和视点。

### 分层规划
这部分负责从视点到实际路径的规划，主要步骤如下：

1. **Volumetric Mapping（体积映射）**：
   - 使用网格地图（Grid Map）进行体积映射，生成ESDF（Euclidean Signed Distance Field，欧几里得符号距离场）。

2. **Global Tour Planning（全局旅行规划）**：
   - 基于生成的视点和ESDF，进行全局路径规划。

3. **Local Viewpoint Refinement（局部视点优化）**：
   - 优化局部视点，确保路径的局部细节。

4. **Minimum-time B-spline Trajectory（最小时间B样条轨迹）**：
   - 生成最小时间的B样条轨迹，确保路径的效率和光滑性。

5. **Controller（控制器）**：
   - 最终由控制器使用生成的轨迹进行实际的路径跟踪。

整个流程的输入包括网格地图（Grid Map）和ESDF，用于生成路径；输出是轨迹（Trajectory），由控制器进行跟踪。

### 数据流
- 从网格地图到前沿检测，再到视点生成和连接成本更新，这些信息会被传递到分层规划部分。
- 在分层规划部分，信息从全局旅行规划到局部视点优化，再到最小时间B样条轨迹，最后到控制器。

这两个部分共同作用，确保前沿信息的实时更新和路径的高效规划。


